# 测试检查清单

## 环境准备

- [ ] Python 3.8+ 已安装
- [ ] Node.js 16+ 已安装
- [ ] pip 已安装
- [ ] npm 已安装
- [ ] 网络连接正常

## 后端测试

### 1. 环境设置

- [ ] 创建虚拟环境成功
- [ ] 激活虚拟环境成功
- [ ] 安装依赖包成功（无错误）
- [ ] 所有依赖版本兼容

### 2. 数据库

- [ ] 数据库初始化成功
- [ ] 所有表创建成功
- [ ] 索引创建成功
- [ ] 默认配置插入成功

### 3. 数据抓取

- [ ] 获取中证指数列表成功
- [ ] 获取指数历史数据成功
- [ ] 获取成份股数据成功
- [ ] 获取财务数据成功
- [ ] 获取国债收益率成功
- [ ] API调用间隔正常（无频率限制错误）

### 4. 计算逻辑

- [ ] 股债性价比计算正确
- [ ] 分位数计算正确
- [ ] ROE权重计算正确
- [ ] 综合分数计算正确
- [ ] 目标仓位计算正确
- [ ] 操作信号判断正确

### 5. API接口

#### 系统管理
- [ ] GET /api/health 返回正常
- [ ] GET /api/system/status 返回正确状态
- [ ] POST /api/data/init 初始化成功
- [ ] POST /api/data/refresh 刷新成功

#### 指数管理
- [ ] GET /api/indices 返回指数列表
- [ ] GET /api/indices?is_favorite=true 筛选正确
- [ ] GET /api/indices?search=沪深 搜索正确
- [ ] GET /api/indices/{id} 返回详情
- [ ] POST /api/indices/{id}/favorite 切换成功
- [ ] PUT /api/indices/{id}/weight 更新成功

#### 数据查询
- [ ] GET /api/stock-bond-ratio 返回正确
- [ ] GET /api/dashboard 返回完整数据

### 6. 定时任务

- [ ] 定时任务初始化成功
- [ ] 任务调度器启动成功
- [ ] 可以手动触发任务
- [ ] 任务执行日志正常

### 7. 错误处理

- [ ] 数据库错误处理正确
- [ ] API错误返回格式统一
- [ ] 日志记录完整
- [ ] 异常不会导致服务崩溃

## 前端测试

### 1. 环境设置

- [ ] npm install 成功
- [ ] 依赖包无冲突
- [ ] 编译无警告/错误

### 2. 页面加载

- [ ] 首页加载成功
- [ ] 样式显示正常
- [ ] 暗黑主题应用正确
- [ ] 响应式布局正常

### 3. 初始化流程

- [ ] 初始化页面显示正确
- [ ] 开始初始化按钮可点击
- [ ] 进度提示显示正常
- [ ] 成功/失败状态显示正确
- [ ] 完成后跳转到主界面

### 4. 仪表盘

- [ ] 股债性价比数据显示正确
- [ ] 分位数进度条显示正确
- [ ] 背景色根据分位数变化
- [ ] 配置建议文字正确
- [ ] 数据更新时间显示正确

### 5. 指数表格

- [ ] 表格数据加载正确
- [ ] 所有列显示正常
- [ ] 分位区间颜色正确
- [ ] 操作提示显示正确
- [ ] 行背景色根据信号变化
- [ ] 表格可滚动
- [ ] 移动端隐藏次要列

### 6. 权重编辑

- [ ] 点击编辑图标进入编辑模式
- [ ] 输入框显示当前值
- [ ] 可以输入新值
- [ ] 保存按钮可用
- [ ] 取消按钮可用
- [ ] 保存后数据更新
- [ ] 保存后重新计算

### 7. 指数选择器

- [ ] 弹窗打开/关闭正常
- [ ] 搜索功能正常
- [ ] 筛选功能正常
- [ ] 星标切换正常
- [ ] 数据实时更新
- [ ] 完成按钮可用

### 8. 刷新功能

- [ ] 刷新按钮可点击
- [ ] 刷新时显示加载状态
- [ ] 刷新后数据更新
- [ ] 移动端浮动按钮显示

### 9. 交互体验

- [ ] 按钮悬停效果正常
- [ ] 点击反馈明显
- [ ] 加载动画流畅
- [ ] 过渡动画自然
- [ ] 无明显卡顿

### 10. 错误处理

- [ ] API错误有提示
- [ ] 网络错误有提示
- [ ] 空数据状态显示正确
- [ ] 错误不会导致页面崩溃

## 集成测试

### 1. 完整流程

- [ ] 启动后端服务
- [ ] 启动前端服务
- [ ] 访问首页
- [ ] 执行初始化
- [ ] 添加自选指数
- [ ] 查看仪表盘数据
- [ ] 调整权重
- [ ] 刷新数据
- [ ] 查看操作提示

### 2. 数据一致性

- [ ] 前后端数据同步
- [ ] 计算结果一致
- [ ] 更新后数据正确
- [ ] 多次刷新数据稳定

### 3. 性能测试

- [ ] 首页加载时间 < 3秒
- [ ] API响应时间 < 1秒
- [ ] 数据刷新时间合理
- [ ] 内存占用正常
- [ ] CPU占用正常

### 4. 兼容性测试

#### 浏览器
- [ ] Chrome 最新版
- [ ] Firefox 最新版
- [ ] Edge 最新版
- [ ] Safari 最新版（Mac）

#### 设备
- [ ] 桌面端（1920x1080）
- [ ] 笔记本（1366x768）
- [ ] 平板（768x1024）
- [ ] 手机（375x667）

### 5. 边界情况

- [ ] 无自选指数时显示正确
- [ ] 无历史数据时显示正确
- [ ] 网络断开时处理正确
- [ ] 数据异常时处理正确
- [ ] 并发请求处理正确

## 文档测试

- [ ] README.md 内容准确
- [ ] USER_GUIDE.md 步骤可执行
- [ ] API_DOCUMENTATION.md 接口正确
- [ ] DEPLOYMENT.md 部署可行
- [ ] 代码注释完整

## 安全测试

- [ ] 无SQL注入漏洞
- [ ] 无XSS漏洞
- [ ] API无未授权访问
- [ ] 敏感信息未暴露
- [ ] 依赖包无已知漏洞

## 发布前检查

- [ ] 所有测试通过
- [ ] 文档完整
- [ ] 代码已提交
- [ ] 版本号已更新
- [ ] CHANGELOG已更新
- [ ] 清理临时文件
- [ ] 清理调试代码
- [ ] 生产环境配置正确

## 测试记录

### 测试环境
- 操作系统: _______________
- Python版本: _______________
- Node.js版本: _______________
- 浏览器: _______________

### 测试日期
- 开始时间: _______________
- 结束时间: _______________
- 测试人员: _______________

### 发现的问题
1. _______________
2. _______________
3. _______________

### 修复情况
1. _______________
2. _______________
3. _______________

### 测试结论
- [ ] 通过，可以发布
- [ ] 有问题，需要修复
- [ ] 需要进一步测试

---

**注意**：
- 每次发布前必须完成此检查清单
- 所有关键项必须通过
- 发现的问题必须记录并跟踪
- 保留测试记录以备查
